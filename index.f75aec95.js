!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},r=t.parcelRequire8424;null==r&&((r=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return o[e]=r,t.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},t.parcelRequire8424=r),r("ILISp");var a=r("bpxeT"),s=r("2TvXO"),c=r("dIxxU"),i=(a=r("bpxeT"),s=r("2TvXO"),r("h6c0i")),l=r("3w7gl"),d=document.querySelector(".homepage-books");d.addEventListener("click",(function(e){return f.apply(this,arguments)}));var u=new(0,l.booksAPI),p=document.querySelector(".btn-up-scroll");function m(e,t){var o=e.map((function(e){var o=e.list_name,n=e.books,r='<p class="theme-book">'.concat(o,"</p>");if(n.length){var a=n.splice(0,t).map((function(e){var t=e._id,o=e.book_image,n=e.title,r=e.author;return'<li class="item-book" data-id="'.concat(t,'">\n            <div class="img-owerlay">\n            <img src="').concat(o,'" alt="').concat(n,'" class="img-book">\n            <div class="owerlay">\n                <p class="owerlay-content">quick view</p>\n            </div>\n            </div>\n            <p class="title-book">').concat(v(n,17),'</p>\n            <p class="author">').concat(v(r,34),"</p>\n            </li>")})).join("");return'<div class="best-book-container">'.concat(r,'<ul class="list-books">').concat(a,'</ul>\n            <button type="button" class="button-more js-btn-more" data-category="').concat(o,'">See more</button></div>')}return'<div class="off-books"><p class="off-books-text">Sorry, there are no books in this category, please choose another category</p></div>'})).join("");return'<h2 class="title-theme-book">Best Sellers <span class="last-word-color">Books</span></h2>'.concat(o)}function h(){return g.apply(this,arguments)}function g(){return(g=e(a)(e(s).mark((function t(){var o,n;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=document.documentElement.scrollWidth,e.prev=1,e.next=4,u.getTopBooks();case 4:if(!(n=e.sent.data).length){e.next=9;break}d.innerHTML=m(n,o<768?1:o<1440&&o>=768?3:5),e.next=10;break;case 9:return e.abrupt("return");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:case"end":return e.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}function b(e){if(e.length){var t=e.map((function(e){var t=e._id,o=e.book_image,n=e.author,r=e.title;return'<li class="item-book" data-id="'.concat(t,'">\n        <div class="img-owerlay">\n        <img src="').concat(o,'" alt="').concat(r,'" class="img-book">\n        <div class="owerlay">\n        <p class="owerlay-content">quick view</p>\n        </div>\n        </div>\n        <p class="title-book">').concat(v(r,17),'</p>\n        <p class="author">').concat(v(n,34),"</p>\n        </li>")})).join("");return'<h2 class="title-theme-book">'.concat((o=e[0].list_name,n=o.split(" "),r=n.splice(0,n.length-1),"".concat(r.join(" "),' <span class="last-word-color">').concat(n.join(""),"</span>")),'</h2><ul class="list-books category">').concat(t,"</ul>")}return'<div class="off-books">\n        <p class="off-books-text">Sorry, there are no books in this category, please choose another category</p>\n        </div>';var o,n,r}function f(){return(f=e(a)(e(s).mark((function t(o){var n,r,a,c,l;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.preventDefault(),n=o.target,e.prev=2,n.classList.contains("js-btn-more")){e.next=7;break}return e.abrupt("return");case 7:return r=n.dataset.category.split(" ").join("%20"),e.next=10,u.getBooksByCategory(r);case 10:a=e.sent.data,d.innerHTML=b(a),c=d.lastElementChild.getBoundingClientRect(),l=c.height,window.scrollBy({top:-l,behavior:"smooth"});case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),console.error(e.t0),i.Notify.failure("Sorry, there was a server error, please reload the page");case 20:case"end":return e.stop()}}),t,null,[[2,16]])})))).apply(this,arguments)}function v(e,t){return e.length>Number(t)?e.slice(0,Number(t))+"...":e}p.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"}),p.classList.add("is-hidden-btn")})),h(),window.addEventListener("scroll",(function(){var e=window.pageYOffset,t=document.documentElement.clientHeight;e>t?p.classList.remove("is-hidden-btn"):p.classList.add("is-hidden-btn")}));l=r("3w7gl");var y=document.querySelector(".category-list-box"),k="https://books-backend.p.goit.global/books/category-list",w=new(0,l.booksAPI);function L(){return x.apply(this,arguments)}function x(){return(x=e(a)(e(s).mark((function t(){var o;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.default.get("".concat(k));case 3:return o=e.sent,e.abrupt("return",o.data);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function S(e){var t='<h3 id="category-list-title" class="category-list-item">All categories</h3>';return e.forEach((function(e){var o='<p id="'.concat(e.list_name,'" class="category-list-item">').concat(e.list_name,"</p>");t+=o})),t}var E,q=(E=e(a)(e(s).mark((function t(){var o;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:o=e.sent,y.innerHTML=S(o);case 4:case"end":return e.stop()}}),t)}))),function(){return E.apply(this,arguments)});function I(){return(I=e(a)(e(s).mark((function t(o){var n,r,a,c,i;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=o.target).classList.contains("category-list-item")){e.next=5;break}return e.abrupt("return");case 5:if("category-list-title"!==(r=n.id.split(" ").join("%20"))){e.next=10;break}h(),e.next=14;break;case 10:return e.next=12,w.getBooksByCategory(r);case 12:a=e.sent.data,d.innerHTML=b(a);case 14:c=d.lastElementChild.getBoundingClientRect(),i=c.height,window.scrollBy({top:-i,behavior:"smooth"});case 16:case"end":return e.stop()}}),t)})))).apply(this,arguments)}q(),y.addEventListener("click",(function(e){return I.apply(this,arguments)})),r("aEag2"),r("cIzEt");a=r("bpxeT"),s=r("2TvXO");var B,T=new(0,(l=r("3w7gl")).booksAPI),_=document.querySelector(".homepage-books"),O=document.querySelector(".back"),N=document.querySelector(".btn-modal-close"),j=document.querySelector(".add"),C=document.querySelector(".remove"),D=document.querySelector(".modal-message"),M={scrollPosition:0,disabledScroll:function(){M.scrollPosition=window.scrollY,document.body.classList.add("block-scroll"),document.body.style.cssText="top: -".concat(M.scrollPosition,"px;")},enabledScroll:function(){document.body.classList.remove("block-scroll"),document.body.style.cssText="top: 0",window.scroll({top:M.scrollPosition})}};function H(e){return P.apply(this,arguments)}function P(){return(P=e(a)(e(s).mark((function t(o){var n,r,a,c,i,l,d,u,p,m,h,g,b,f,v,y,k;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M.disabledScroll(),document.addEventListener("keydown",(function(e){"Escape"===e.key&&J()}),{once:!0}),e.prev=2,e.next=5,T.getBookById(o);case 5:n=e.sent,r=n.data,a=r.author,c=r.book_image,i=r.description,l=r.title,d=r.buy_links,u=document.querySelector(".book-img"),p=document.querySelector("#name-book"),m=document.querySelector("#author"),h=document.querySelector("#description"),g=document.querySelector("#amazon"),b=document.querySelector("#apple"),f=document.querySelector("#barnes"),u.innerHTML="",v='<img src="'.concat(c,'" alt="').concat(c,'" class="img-modal">'),p.textContent=l,m.textContent=a,h.textContent=""===i?"No description":i,g.attributes[0].value=d[0].url,b.attributes[0].value=d[1].url,f.attributes[0].value=d[2].url,u.innerHTML=v,O.classList.toggle("is-hidden"),y=localStorage.getItem("orderedBookID"),null!==(k=JSON.parse(y))&&k.includes(o)?(C.classList.remove("is-hidden"),D.classList.remove("is-hidden")):j.classList.remove("is-hidden"),e.next=33;break;case 29:e.prev=29,e.t0=e.catch(2),console.error(e.t0),Notify.failure("Sorry, there was a server error, please reload the page");case 33:case"end":return e.stop()}}),t,null,[[2,29]])})))).apply(this,arguments)}function J(){M.enabledScroll(),O.classList.toggle("is-hidden"),C.classList.add("is-hidden"),j.classList.add("is-hidden"),D.classList.add("is-hidden")}_.addEventListener("click",(function(e){"img-book"===e.target.classList[0]||"owerlay"===e.target.classList[0]?H(B=e.target.parentElement.parentElement.dataset.id):"owerlay-content"===e.target.classList[0]?H(B=e.target.parentElement.parentElement.parentElement.dataset.id):"title-book"!==e.target.classList[0]&&"author"!==e.target.classList[0]||H(B=e.target.parentElement.dataset.id)})),N.addEventListener("click",J),j.addEventListener("click",(function(){j.classList.add("is-hidden"),C.classList.remove("is-hidden"),D.classList.remove("is-hidden");var e=localStorage.getItem("orderedBookID"),t=JSON.parse(e);console.log(t),null===t&&(t=[]);t.push(B),localStorage.setItem("orderedBookID",JSON.stringify(t))})),C.addEventListener("click",(function(){j.classList.remove("is-hidden"),C.classList.add("is-hidden"),D.classList.add("is-hidden");var e=localStorage.getItem("orderedBookID"),t=JSON.parse(e),o=t.indexOf(B);t.splice(o,1),localStorage.removeItem("orderedBookID"),localStorage.setItem("orderedBookID",JSON.stringify(t))})),r("9haEe"),r("d474f");var A=document.querySelector(".js-nav-homelink"),R=document.querySelector(".js-mobile-nav-homelink");A.classList.toggle("selected"),R.classList.toggle("mobile-selected")}();
//# sourceMappingURL=index.f75aec95.js.map
