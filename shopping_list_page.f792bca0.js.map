{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-79cc9184c50ffe59.js","src/shopping_list_page.js","src/js/shopping_list.js","node_modules/@parcel/runtime-js/lib/runtime-be55e8c3252767ab.js","node_modules/@parcel/runtime-js/lib/runtime-20454118e278cbaa.js","node_modules/@parcel/runtime-js/lib/runtime-fa24c7b496c50ed7.js","node_modules/@parcel/runtime-js/lib/runtime-f3f79cc3333bf539.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"jDSjF\\\":\\\"shopping_list_page.f792bca0.js\\\",\\\"d45ku\\\":\\\"amazon.a7ec3af8.png\\\",\\\"llAg9\\\":\\\"apple-books.a9f158e0.png\\\",\\\"3OViI\\\":\\\"barnes-and-noble.eb5fbc1e.png\\\",\\\"8xNye\\\":\\\"trash-03.deb29b96.png\\\",\\\"d1j6q\\\":\\\"index.1b365da7.js\\\"}\"));","import './js/isChangeTheme';\nimport './js/shopping_list';\nimport './js/support_ukraine';\nimport './js/mobile_menu';\nimport './js/about_us_modal_window';\nimport './js/autorization_modal_window';\n\nconst shoppingListLinkEl = document.querySelector('.js-nav-shoppinglistlink');\nconst mobileShoppingListLinkEl = document.querySelector('.js-mobile-nav-shoppinglistlink');\nconst mobileShoppingBagIconEl = document.querySelector('.js-mobile-shopping-bag-icon');\n\nshoppingListLinkEl.classList.toggle('selected');\nmobileShoppingListLinkEl.classList.toggle('mobile-selected');\nmobileShoppingBagIconEl.classList.toggle('mobile-selected');\n","import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport amazon from '/src/images/png/amazon.png';\nimport appleBook from '/src/images/png/apple-books.png';\nimport Barners from '/src/images/png/barnes-and-noble.png';\nimport bucketTrash from '/src/images/png/trash-03.png';\nimport axios from 'axios';\nimport { countShoppingBook } from './header';\n\nconst photoItemsOne = [\n  {\n    img: amazon,\n  },\n];\n\nconst photoItemsTwo = [\n  {\n    img: appleBook,\n  },\n];\n\nconst photoItemsThree = [\n  {\n    img: Barners,\n  },\n];\n\nconst bucketCard = [\n  {\n    img: bucketTrash,\n  },\n];\n\n// Список книг та функція слухач на видалення книги\nconst shoppingListDiv = document.querySelector('.shopping_booklist');\nshoppingListDiv.addEventListener('click', removeBook);\n\n// Дів рендеру кнопок пагінації та случач для перемикання сторінок + масив книг які відображати і констнта кількості книг на сторінці\nconst paginationList = document.querySelector('.shopping_booklist_pagination');\n\n// Ключ локал стореджа та парс даних з локала в масив\nconst LOCALSTORAGE_KEY = 'orderedBookID';\nconst orderedBooksId_str = JSON.parse(localStorage.getItem(LOCALSTORAGE_KEY));\n// __________________________________________________________________________\n// Функція формування та відправлення паралельного запиту\nasync function fetchBook(arr) {\n  try {\n    const arrayOfPromises = arr.map(async Id => {\n      const response = await axios.get(\n        `https://books-backend.p.goit.global/books/${Id}`\n      );\n      return response;\n    });\n\n    // Запускаємо усі проміси паралельно і чекаємо на їх завершення\n    return await Promise.all(arrayOfPromises);\n  } catch (error) {\n    Notify.failure('Sorry, there was a server error, please reload the page');\n  }\n}\n\n// Функція створення розмітки\nasync function createMarcup(arr) {\n  const markup = arr\n    .map(\n      ({ _id, book_image, list_name, author, title, description, buy_links }) =>\n        `<li class=\"book_card\">\n    <div class=\"book-image-div\">\n      <img class=\"book-image\" src=${book_image} alt=${title}>\n    </div>\n\n    <div class=\"book_information\">\n      <p class=\"book-title\">${title}</p>\n      <p class=\"book-category\">${list_name}</p>\n      <p class=\"book-description\">${\n        description ? description : 'No description'\n      }</p>\n      <p class=\"book-author\">${author}</p>\n    </div>\n\n    <div class=\"closer\">\n      <button data-id=\"${_id}\" class=\"closer-btn\">\n        <img class=\"image-bucket\" src=\"${bucketCard[0].img}\" alt=\"amazon\">\n      </button>\n    </div>\n\n    <div class=\"market_places_div\">\n      <ul class=\"market_placers_list list\">\n        <li class=\"marketplacer_li_two\">\n          <a href=\"${buy_links[0].url}\" class=\"marketplacer_li_link link\">\n            <img class=\"image-market\" src=\"${\n              photoItemsOne[0].img\n            }\" alt=\"amazon\">  \n          </a>\n        </li>\n\n        <li class=\"marketplacer_li\">\n          <a href=\"${buy_links[1].url}\" class=\"marketplacer_li_link link\">\n            <img src=\"${photoItemsTwo[0].img}\" alt=\"apple-books\">      \n          </a>\n        </li>\n\n        <li class=\"marketplacer_li\">\n          <a href=\"${buy_links[2].url}\" class=\"marketplacer_li_link link\">\n            <img src=\"${photoItemsThree[0].img}\" alt=\"barnes-and-noble\">\n          </a>\n        </li>\n    </div>\n  </li>`\n    )\n    .join('');\n\n  return markup;\n}\n\n// Функція видалення книг з шопінг листа\nasync function removeBook(event) {\n  const { target } = event;\n\n  if (!target.classList.contains('closer-btn')) {\n    return;\n  } else {\n    const bookId = target.dataset.id;\n    localStorage.removeItem(LOCALSTORAGE_KEY);\n    const bookDelete = orderedBooksId_str.indexOf(bookId);\n    orderedBooksId_str.splice(bookDelete, 1);\n    // orderedBooksId_str.filter(({id}) => id !== bookId);\n    localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(orderedBooksId_str));\n    countShoppingBook(orderedBooksId_str);\n    return await createShoppingList();\n  }\n}\n\n// Центральна функція, робить перевірки, запит та відмальовує\nasync function createShoppingList() {\n  const response = await fetchBook(orderedBooksId_str);\n  countShoppingBook(orderedBooksId_str);\n  const shoppingBook = [];\n  let currentPage = 0;\n  const rows = 3;\n\n  if (!response.length) {\n    shoppingListDiv.innerHTML = '';\n    return;\n  }\n\n  response.forEach(({ data }) => shoppingBook.push(data));\n\n  if (shoppingBook.length > rows) {\n    createPagination(shoppingBook, rows, currentPage);\n    sliceArrayBooks(shoppingBook, rows, currentPage);\n    controlPage(currentPage);\n  } else {\n    shoppingListDiv.innerHTML = await createMarcup(shoppingBook);\n  }\n}\n\n// Виклик центральної функції для запуску всього процесу\ncreateShoppingList();\n\n// Пагінація усі функції\n\n// Функція яка відмображає три елемента масиву відповідно до сторінки\nasync function sliceArrayBooks(arr, rows, page) {\n  const start = rows * page;\n  const end = start + rows;\n  const paginateArr = arr.slice(start, end);\n\n  const markup = await createMarcup(paginateArr);\n\n  shoppingListDiv.innerHTML = '';\n  shoppingListDiv.innerHTML = markup;\n}\n\n// Функція яка створює кнопки пагінації в залежності від розміру масиву\nfunction createPagination(arr, rows, currentPage) {\n  const pagesCount = Math.ceil(arr.length / rows);\n\n  if (arr.length <= rows) {\n    return (paginationList.innerHTML = '');\n  }\n\n  for (let i = 0; i < pagesCount; i += 1) {\n    const button = document.createElement('button');\n    button.textContent = i + 1;\n    button.classList.add('btn-two');\n\n    button.addEventListener('click', event => {\n      let page = Number(event.target.textContent) - 1;\n\n      sliceArrayBooks(arr, rows, page);\n      controlPage(page);\n    });\n\n    paginationList.append(button);\n  }\n}\n\n// Додає клас активної сторінки\nfunction controlPage(page) {\n  for (const button of paginationList.children) {\n    if (Number(button.textContent) - 1 === page) {\n      button.classList.add('active');\n    }\n\n    if (Number(button.textContent) - 1 !== page) {\n      button.classList.remove('active');\n    }\n  }\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"d45ku\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"llAg9\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"3OViI\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"8xNye\")).toString();"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$iQIUW","$6fa884df9bbe3d90$exports","URL","resolve","import","meta","url","toString","$b0bb4a380a595f61$exports","$242940faea70e10c$exports","$d5416f09d5608879$exports","$bad122fcaab182c2$var$photoItemsOne","img","$parcel$interopDefault","$bad122fcaab182c2$var$photoItemsTwo","$bad122fcaab182c2$var$photoItemsThree","$bad122fcaab182c2$var$bucketCard","$bad122fcaab182c2$var$shoppingListDiv","document","querySelector","addEventListener","async","event","target","classList","contains","bookId","dataset","localStorage","removeItem","bookDelete","$bad122fcaab182c2$var$orderedBooksId_str","indexOf","splice","setItem","stringify","$bUb57","countShoppingBook","$bad122fcaab182c2$var$createShoppingList","$bad122fcaab182c2$var$paginationList","getItem","$bad122fcaab182c2$var$createMarcup","arr","map","_id","book_image","list_name","author","title","description","buy_links","join","response","arrayOfPromises","Id","$2shzp","default","get","Promise","all","error","Notify","failure","$bad122fcaab182c2$var$fetchBook","shoppingBook","forEach","data","push","rows","currentPage","pagesCount","Math","ceil","innerHTML","button","createElement","textContent","add","page","Number","$bad122fcaab182c2$var$sliceArrayBooks","$bad122fcaab182c2$var$controlPage","append","$bad122fcaab182c2$var$createPagination","start","end","paginateArr","slice","markup","children","remove","$a20555f4dcdd484a$var$shoppingListLinkEl","$a20555f4dcdd484a$var$mobileShoppingListLinkEl","$a20555f4dcdd484a$var$mobileShoppingBagIconEl","toggle"],"version":3,"file":"shopping_list_page.f792bca0.js.map"}