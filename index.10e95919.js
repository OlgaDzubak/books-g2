!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},r=t.parcelRequire8424;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},t.parcelRequire8424=r),r.register("1UHsN",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}})),r.register("ffZzF",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return t.get?t.get.call(e):t.value}})),r.register("5k7tO",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),r("ILISp");var a=r("bpxeT"),s=r("2TvXO"),c=r("dIxxU"),i=(a=r("bpxeT"),s=r("2TvXO"),r("h6c0i")),l=r("8MBJY"),u={};Object.defineProperty(u,"__esModule",{value:!0}),u.default=function(e,t){var n=d.default(e,t,"get");return p.default(e,n)};var d=f(r("1UHsN")),p=f(r("ffZzF"));function f(e){return e&&e.__esModule?e:{default:e}}var g={};Object.defineProperty(g,"__esModule",{value:!0}),g.default=function(e,t,n){m.default(e,t),t.set(e,n)};var h,m=(h=r("5k7tO"))&&h.__esModule?h:{default:h};var v=r("a2hTj"),y=(c=r("dIxxU"),new WeakMap),b=function(){"use strict";function t(){e(l)(this,t),e(g)(this,y,{writable:!0,value:"https://books-backend.p.goit.global/books/"})}return e(v)(t,[{key:"getBookById",value:function(t){return console.log("".concat(e(u)(this,y)).concat(t)),c.default.get("".concat(e(u)(this,y)).concat(t))}},{key:"getTopBooks",value:function(){return c.default.get("".concat(e(u)(this,y),"top-books"))}},{key:"getCategoryList",value:function(){return c.default.get("".concat(e(u)(this,y),"categoty-list"))}},{key:"getBooksByCategory",value:function(t){return c.default.get("".concat(e(u)(this,y),"category?category=").concat(t))}}]),t}();r("i8Q71");var k=document.querySelector(".homepage-books");k.addEventListener("click",(function(e){return _.apply(this,arguments)}));var w=new b,L=document.querySelector(".btn-up-scroll");function x(){return S.apply(this,arguments)}function S(){return(S=e(a)(e(s).mark((function t(){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function E(e){if(e.length){var t=e.map((function(e){var t=e._id,n=e.book_image,o=e.author,r=e.title;return'<li class="item-book" data-id="'.concat(t,'">\n        <div class="img-owerlay">\n        <img src="').concat(n,'" alt="').concat(r,'" class="img-book">\n        <div class="owerlay">\n        <p class="owerlay-content">quick view</p>\n        </div>\n        </div>\n        <p class="title-book">').concat(B(r,17),'</p>\n        <p class="author">').concat(B(o,34),"</p>\n        </li>")})).join("");return'<h2 class="title-theme-book">'.concat((n=e[0].list_name,o=n.split(" "),r=o.splice(0,o.length-1),"".concat(r.join(" "),' <span class="last-word-color">').concat(o.join(""),"</span>")),'</h2><ul class="list-books category">').concat(t,"</ul>")}return'<div class="off-books">\n        <p class="off-books-text">Sorry, there are no books in this category, please choose another category</p>\n        </div>';var n,o,r}function _(){return(_=e(a)(e(s).mark((function t(n){var o,r,a,c,l;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),o=n.target,e.prev=2,o.classList.contains("js-btn-more")){e.next=7;break}return e.abrupt("return");case 7:return r=o.dataset.category.split(" ").join("%20"),e.next=10,w.getBooksByCategory(r);case 10:a=e.sent.data,k.innerHTML=E(a),c=k.lastElementChild.getBoundingClientRect(),l=c.height,window.scrollBy({top:-l,behavior:"smooth"});case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),console.error(e.t0),i.Notify.failure("Sorry, there was a server error, please reload the page");case 20:case"end":return e.stop()}}),t,null,[[2,16]])})))).apply(this,arguments)}function B(e,t){if(!(e.length>Number(t)))return e;switch(function(e,t){var n=t.lenght,o=0,r=e.indexOf(t);for(;r>=0;)o++,r=e.indexOf(t,r+n);return o}(e," ")){case 0:return e.slice(0,Number(t))+"...";case 1:return e.slice(0,Number(t-1))+"...";default:return e.slice(0,Number(t-2))+"..."}}L.addEventListener("click",(function(){wndow.scrollTo({top:0,behavior:"smooth"}),L.classList.add("is-hidden-btn")})),x(),window.addEventListener("scroll",(function(){var e=window.pageYOffset,t=document.documentElement.clientHeight;e>t?L.classList.remove("is-hidden-btn"):L.classList.add("is-hidden-btn")}));var T=document.querySelector(".category-list-box"),O="https://books-backend.p.goit.global/books/category-list",q=new b;function I(){return M.apply(this,arguments)}function M(){return(M=e(a)(e(s).mark((function t(){var n;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.default.get("".concat(O));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function N(e){var t='<h3 id="category-list-title" class="category-list-item">All categories</h3>';return e.forEach((function(e){var n='<p id="'.concat(e.list_name,'" class="category-list-item">').concat(e.list_name,"</p>");t+=n})),t}var j,C=(j=e(a)(e(s).mark((function t(){var n;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:n=e.sent,T.innerHTML=N(n);case 4:case"end":return e.stop()}}),t)}))),function(){return j.apply(this,arguments)});function H(){return(H=e(a)(e(s).mark((function t(n){var o,r,a,c,i;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=n.target).classList.contains("category-list-item")){e.next=5;break}return e.abrupt("return");case 5:if("category-list-title"!==(r=o.id.split(" ").join("%20"))){e.next=10;break}k.innerHTML="",x(),e.next=19;break;case 10:return k.innerHTML="",k.classList.add("loader"),e.next=14,q.getBooksByCategory(r);case 14:a=e.sent.data,k.classList.remove("loader"),k.innerHTML=E(a),c=k.lastElementChild.getBoundingClientRect(),i=c.height,window.scrollBy({top:-i,behavior:"smooth"});case 19:case"end":return e.stop()}}),t)})))).apply(this,arguments)}C(),T.addEventListener("click",(function(e){return H.apply(this,arguments)})),r("aEag2"),r("cIzEt");a=r("bpxeT"),s=r("2TvXO");var D,P=r("i8Q71"),J=new b,U=document.querySelector(".homepage-books"),z=document.querySelector(".back"),R=document.querySelector(".btn-modal-close"),F=document.querySelector(".add"),X=document.querySelector(".remove"),Y=document.querySelector(".modal-message"),Q={scrollPosition:0,disabledScroll:function(){Q.scrollPosition=window.scrollY,document.body.classList.add("block-scroll"),document.body.style.cssText="top: -".concat(Q.scrollPosition,"px;")},enabledScroll:function(){document.body.classList.remove("block-scroll"),document.body.style.cssText="top: 0",window.scroll({top:Q.scrollPosition})}};function Z(e){return A.apply(this,arguments)}function A(){return(A=e(a)(e(s).mark((function t(n){var o,r,a,c,i,l,u,d,p,f,g,h,m,v,y,b,k;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q.disabledScroll(),document.addEventListener("keydown",(function(e){"Escape"===e.key&&W()}),{once:!0}),e.prev=2,e.next=5,J.getBookById(n);case 5:o=e.sent,r=o.data,a=r.author,c=r.book_image,i=r.description,l=r.title,u=r.buy_links,d=document.querySelector(".book-img"),p=document.querySelector("#name-book"),f=document.querySelector("#author"),g=document.querySelector("#description"),h=document.querySelector("#amazon"),m=document.querySelector("#apple"),v=document.querySelector("#barnes"),d.innerHTML="",y='<img src="'.concat(c,'" alt="').concat(c,'" class="img-modal">'),p.textContent=l,f.textContent=a,g.textContent=""===i?"No description":i,h.attributes[0].value=u[0].url,m.attributes[0].value=u[1].url,v.attributes[0].value=u[2].url,d.innerHTML=y,z.classList.toggle("is-hidden"),b=localStorage.getItem("orderedBookID"),null!==(k=JSON.parse(b))&&k.includes(n)?(X.classList.remove("is-hidden"),Y.classList.remove("is-hidden")):F.classList.remove("is-hidden"),e.next=33;break;case 29:e.prev=29,e.t0=e.catch(2),console.error(e.t0),Notify.failure("Sorry, there was a server error, please reload the page");case 33:case"end":return e.stop()}}),t,null,[[2,29]])})))).apply(this,arguments)}function W(){Q.enabledScroll(),z.classList.toggle("is-hidden"),X.classList.add("is-hidden"),F.classList.add("is-hidden"),Y.classList.add("is-hidden")}U.addEventListener("click",(function(e){"img-book"===e.target.classList[0]||"owerlay"===e.target.classList[0]?Z(D=e.target.parentElement.parentElement.dataset.id):"owerlay-content"===e.target.classList[0]?Z(D=e.target.parentElement.parentElement.parentElement.dataset.id):"title-book"!==e.target.classList[0]&&"author"!==e.target.classList[0]||Z(D=e.target.parentElement.dataset.id)})),R.addEventListener("click",W),F.addEventListener("click",(function(){F.classList.add("is-hidden"),X.classList.remove("is-hidden"),Y.classList.remove("is-hidden");var e=localStorage.getItem("orderedBookID"),t=JSON.parse(e);null===t&&(t=[]);t.push(D),localStorage.setItem("orderedBookID",JSON.stringify(t)),(0,P.countShoppingBook)(t)})),X.addEventListener("click",(function(){F.classList.remove("is-hidden"),X.classList.add("is-hidden"),Y.classList.add("is-hidden");var e=localStorage.getItem("orderedBookID"),t=JSON.parse(e),n=t.indexOf(D);t.splice(n,1),localStorage.removeItem("orderedBookID"),localStorage.setItem("orderedBookID",JSON.stringify(t)),(0,P.countShoppingBook)(t)})),r("9haEe"),r("d474f");var G=document.querySelector(".js-nav-homelink"),K=document.querySelector(".js-mobile-nav-homelink");G.classList.toggle("selected"),K.classList.toggle("mobile-selected")}();
//# sourceMappingURL=index.10e95919.js.map
